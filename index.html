<!DOCTYPE html>
<!--
The MIT License

Copyright 2014 ko.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
-->
<html>
<head>
    <title>Bible Circle</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <!-- Bootstrap -->
   
    <link href="css/bootstrap-yeti.css" rel="stylesheet" >
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.css" rel="stylesheet">
    <link href="css/bcstyle.css" rel="stylesheet">
    
    <script src="//code.jquery.com/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="bibleutil.js"></script>
    <style>
            
        body {
            padding-top: 52px;
            padding-bottom: 30px;      
        }      

        .biblepanel-silver {
            border: 0px silver solid;
            border-radius: 10px;
            background: url(/images/darkbluesilver-bg.jpg);
            
            padding: 25px 12px 12px 12px;
            
            height: 816px;
        }
        
        .panel-bible {
            background-image: linear-gradient(to bottom, #f8f8f8 0%, #fefefe 100%);
            background-repeat: repeat-x;
            border: none;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 0px;
            padding: 0px;
            box-shadow: none;
        }
        
        .panel-body-round {
            background-color: whitesmoke;
            opacity: 1.0;
            border: 0px black solid;
            border-radius: 8px;
        }
        
        .panel-body {
            padding: 5px 15px;
        }
        
        .text-container {
            padding: 0px 8px 8px 8px; 
            min-height: 600px;
        }
        
        .panel-status {
            -webkit-border-radius: 3px;
            border-radius: 3px;
            -webkit-transition: left .5s cubic-bezier(0.250,0.460,0.450,0.940),width .4s ease,padding .4s ease,box-shadow .4s ease,margin .4s ease,border .4s ease;
            transition: left .5s cubic-bezier(0.250,0.460,0.450,0.940),width .4s ease,padding .4s ease,box-shadow .4s ease,margin .4s ease,border .4s ease;
            background-color: #f5f5f5;
            border: 1px solid #d8d8d8;
            border-bottom-width: 2px;
            left: 0;
            margin: 10px 0 20px 0;
            padding: 20px;
            position: relative;
            z-index: 2;
        }
        
        .panel-heading-sm {
            padding: 5px 10px;
        }
        
        .textbox h2 {
            font-size: 140%;
        }
        
        .textbox h3 {
            font-size: 130%;
        }
        
        .textbox h4 {
            font-size: 120%;
        }
        
        h4.title {
            border: 0 solid #efefef;
            border-bottom-width: 1px;
            padding-bottom: 10px;
        }
        
        .box {
            background-color: #FFFFFF;
            -moz-border-radius: 1px 1px 1px 1px;
            -webkit-border-radius: 1px 1px 1px 1px;
            border-radius: 1px 1px 1px 1px;
            box-shadow: 0 0 0 1px rgba(0,0,0,0.05);
        }
        
        .widget-head {
            font-size: 15px;
            font-weight: bold;
            line-height: 50px;
            margin: 0;
            text-align: center;
            text-transform: uppercase;
            box-shadow: 0 1px 0px 0px rgba(0,0,0,0.10);
            color: #eb7a77;
        
        }
            
        .widget-head {
            background: #ffffff;
        }
        
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            background-color: rgba(0,0,0,0.5); /*dim the background*/
        }
          
        #btn-biblemenutitle {
            font-size: 16px;
            margin-top: -4px;
        }
        
        .btn {
            padding: 4px 10px;
        }
        
        .booktitle {
                font-size: 14px;
                font-weight: bold;
                line-height: 16px;
                padding-top: 4px;
        }

        ul.submenu {
            margin: 0 0 10px 10px;
            width: 120px;
            float: left;
            overflow: visible;
        }

        .submenu > li {
            list-style: none;
        }

        ul.submenu {
            padding-left: 10px;
        }

        .submenu > li > a {
          display: block;
          padding: 3px 8px 3px 10px;
          clear: both;
          font-weight: normal;
          line-height: 20px;
          color: #333333;
          white-space: nowrap;

        }

        .submenu > li:hover

        {
            color: #ffffff;
            background-image: linear-gradient(to bottom,#fff 0,#e6e6e6 100%);

        }

        .submenu > li > a:hover 
        {
            text-decoration:none;
        }

        .submenu > li span.trig {
            float: right;
            padding: 3px 6px 4px 6px;
            margin: auto;

        }

        .submenu > li span.trig:hover {
            background-image: linear-gradient(to bottom,#fff 0,#e6e6e6 100%);
            background-repeat: repeat-x;
        }

        .submenu > li ul.chaptermenu {
            background-image: linear-gradient(to bottom,#fff 0,#e6e6e6 100%);
            background-repeat: repeat-x;
            background-color: lightskyblue;
            color: black;
            position: absolute;
            padding: 2px;
            width: 168px;
            max-height: 240px;
            overflow-y: auto;
            border: 2px solid grey;
        }

        .submenu > li ul.chaptermenu li {
            list-style: none;
            display: inline-block;

            width: 24px;
            height: 24px;
            border: 1px solid black;
            text-align: center;
        }

        .submenu > li ul.chaptermenu li:hover {
            background-color: #777;
            color: #eee;
        }
        
        .statuspanel {
            margin-top: 10px;
            height: 630px; 
            overflow-y: scroll; 
            transition: height 2s;
        }
        
        .cboxrow {
            margin-top: 10px;
        }
        
        .cboxrow span {
            
            float: left;
            width: 16px;
            height: 16px;
            line-height: 14px;

            border: 1px solid #bbb;
            text-align: center;
            font-size:12px;
            font-family:  'arial', Charcoal, sans-serif;
            
            cursor: pointer;
            color: graytext;
        }
        
        .cboxrow span:hover {
            background-color: #ddd;
        }
        
        .cboxrow span.loading {
            color: black;
            border: 1px solid #222;
            background-image: url("/images/loading-sm.gif");
            background-position: 50% 80%; 
            background-repeat: no-repeat;
        }
        
        .cboxrow span.boxchecked {
            color: black;
            border: 1px solid #222;
            background-image: url("/images/checkmark12.png");
            background-position: 50% 80%; 
            background-repeat: no-repeat;
        }
        
        
        
        .brow {
            padding-left: 18px;
        }

        .brow li {
            float: left;
            width: 30px;
            height: 30px;
            line-height: 26px;

            border: 1px solid #bbb;
            text-align: center;
            font-size:14px;
            font-family:  'arial', Charcoal, sans-serif;
            
            cursor: pointer;
            color: graytext;
            list-style: none;
        }
        
        .brow li:hover {
            background-color: #ddd;
        }
        
        .brow li.boxchecked {
            color: black;
            border: 1px solid #222;
            background-image: url("/images/checkmark12.png");
            background-position: 65% 90%; 
            background-repeat: no-repeat;
        }
        
        .brow li.loading {
            color: black;
            border: 1px solid #222;
            background-image: url("/images/loading-sm.gif");
            background-position: 65% 90%; 
            background-repeat: no-repeat;
        }
        
        
        .biblemenutitle {
            font-size: 16px;
            font-weight: 1.5;
                
        }
    </style>
    <script type="text/javascript">
        
        var userid = 0;
        // Interface to bible text
        function biblestore() {
            var localstore = {};
            this.getChapterLocal = function(version, booknum, chapter) {
                var refString = version + '-' + parseInt(booknum) + ':' + parseInt(chapter);
                
                if (localstore.hasOwnProperty(refString)) {
                    return localstore[refString];
                } else {
                    console.log(refString);
                    return null;
                }
            };
            
            this.fetchChapterCallBack = function(version, booknum, chapter, cbfunc) {
                var rows = this.getChapterLocal(version, booknum, chapter);
                if (rows !== null) {
                    cbfunc(rows);
                    return;
                } else {
                    var refString = version + '-' + parseInt(booknum) + ':' + parseInt(chapter);
                    if (version === "CUV" || version === "KJV" || version == "ESV") {
                        $.getJSON("/api/bible/" + booknum + "/" + chapter, {version: version}, function(robj) {
                            
                            localstore[refString] = robj.rows;
                            cbfunc(robj.rows);
                            
                        });
                    } else if (version === "NET") {
                        bname = biblebooklist[booknum][0];
                        bpassage = bname + ' ' + parseInt(chapter);
                        $.getJSON("//labs.bible.org/api/?callback=?", {passage: bpassage, type: "json"}, 
                            function(robj) {
                                var row = {verse: "chaptertitle", text: bpassage};
                                robj.unshift(row);
                                localstore[refString] = robj;
                                cbfunc(robj);
                                
                            }
                        );
                    }
                    return;
                }
            };
            return this;
        };
        
        function initLoginUser() {
            $.getJSON("/user/me", {}, function(retobj) {
                userid = retobj.userid;
                if (userid !== 0 && userid != null) {
                    $("#nav-setting, #nav-user").removeClass("hide");
                    $("#nav-user span.user").text(retobj.firstname + ' ' + retobj.lastname);
										$("#right-column").hide();
                    bibleReader.planinstid = parseInt(retobj.curplanid);
                    bibleReader.loadcurrentchapter();
                    bibleReader.loadstatus();
                } else {
                    $("#nav-login, #nav-signup").removeClass("hide");
                    bibleReader.loadcurrentchapter();
                }
                $("#loading-overlay").addClass("hide");
            });
            
        }
        var bstore = new biblestore();
        
        var bibleReader = {
            version: 'NET',
            version2: 'CUV',
            activerange: [1, 66],
            plantitle: "Whole Bible",
            scope: "WholeBible",
            book: 1,
            chapter: 1,
            startdate: "2019-01-01",
            planinstid: 1,
            statustable: new Array(66),
            totalchapter: 1000,
            donechapter: 100,
            linestyle: "singleline",
            mode: "single",
            alignviewpanelheight: function() {
                var l1 = $("#singleviewpane .textbox").height();
                var l2 = $("#viewpane2 .textbox").height();
                if (l1 > l2) {
                    //$("#viewpane2 .textbox").height(l1);
                } else {
                    //$("#singleviewpane .textbox").height(l2);
                }
            },
            displaytext: function(rows, linestyle, viewpanel) {
                viewpanel.find(".textbox").empty();
                $.each(rows, function(index, rec) {
                    if (rec.verse === "chaptertitle") {
                        viewpanel.find(".textbox").append("<h3>" + rec.text + "</h3>");
                    } else if (rec.verse === "htmltext") {
                        viewpanel.find(".textbox").append(rec.text);
                    } else {
                        if (linestyle === "singleline") {
                            viewpanel.find(".textbox").append(rec.verse + '&nbsp' + rec.text + "<br/>");
                        } else {
                            viewpanel.find(".textbox").append(rec.verse + '&nbsp' + rec.text);
                        }
                    }
                });
            },
            displaycheckbox: function(booknum, chapter) {
                var instidstr = this.planinstid.toString();   
                $("singleviewpan .cboxrow").empty();
                if (this.planinstid > 5) {
                    $.getJSON("/api/plan/" + instidstr + "/" + booknum + "/" + chapter, {filter: "status"},
                        function(retobj) {
                            $("#singleviewpane .cboxrow").html("<span></span> &nbsp &nbsp Chapter Done");
                            $("#singleviewpane .cboxrow").show();
                            if (retobj.status === 1) {
                                $("#singleviewpane .cboxrow span").addClass("boxchecked");
                            };
                            $("#singleviewpane .text-container .cboxrow span").click(function () {
                                bibleReader.togglechapterdonebox($(this), booknum, chapter);
                            })
                            
                        }
                    )
                };       
                 
            },
            displaychapter: function(booknum, chapter) {
                
                var bkname = biblebooklist[booknum][0];
                $("#singleviewpane .bookname span").text(bkname + " " + chapter);
                bstore.fetchChapterCallBack(this.version, booknum, chapter, 
                    function(rows) {
                        bibleReader.displaytext(rows, bibleReader.linestyle, $("#singleviewpane"));
                    }
                );
                this.displaycheckbox(booknum, chapter);
                    
            },
            displaychapterpanel2: function(booknum, chapter) {
                
                var bkname = biblebooklist[booknum][0];
                $("#viewpane2 .bookname span").text(bkname + " " + chapter);
                bstore.fetchChapterCallBack(this.version2, booknum, chapter, 
                    function(rows) {
                        bibleReader.displaytext(rows, bibleReader.linestyle, $("#viewpane2"));
                        
                    }
                );
            },
            changeversion: function(ver) {
                this.version = ver;
                $("#btn-versiontext").text(ver);
                this.displaychapter(this.book, this.chapter);
            },
            changeversion2: function(ver) {
                this.version2 = ver;
                $("#btn-versiontext2").text(ver);
                this.displaychapterpanel2(this.book, this.chapter);
            },
            switchchapter: function(bnum, ch) {
                    this.book = bnum;
                    this.chapter = ch;
                    this.displaychapter(bnum, ch);
                    this.displaychapterpanel2(bnum, ch);
                    var bookname = biblebooklist[bnum][0];
                    $("#bibleindex input").val(bookname + " " + ch);         
           },
            loadcurrentchapter: function () {
                this.displaychapter(this.book, this.chapter);
            },
            loadnextchapter: function () {
                if (this.chapter < biblebooklist[this.book][1]) {
                    this.chapter = this.chapter + 1;
                    this.switchchapter(this.book, this.chapter);
                } else {
                    if (this.book < 66) {
                        this.book += 1;
                        this.chapter = 1;
                        this.switchchapter(this.book, this.chapter);
                    }
                }
            },
            loadprevchapter: function () {
                this.chapter -= 1;
                if (this.chapter <= 0) {
                    if (this.book > 1) {
                        this.book -= 1;
                        this.chapter = biblebooklist[this.book][1];
                        this.switchchapter(this.book, this.chapter);
                    }
                } else {
                    this.switchchapter(this.book, this.chapter);
                }
            },
            loadprevbook: function () {
                if (this.book > 1) {
                    this.book -= 1;
                    this.chapter = 1;
                    this.switchchapter(this.book, this.chapter);
                }
            },
            loadnextbook: function () {
                if (this.book < 66) {
                    this.book += 1;
                    this.chapter = 1;
                    this.switchchapter(this.book, this.chapter);
                }
            },
            switchtoonepane: function () {
                $("#singleviewpane").removeClass("col-md-6");
                $("#singleviewpane").removeClass("col-lg-6");
                $("#singleviewpane").addClass("col-md-12");
                $("#singleviewpane").addClass("col-lg-12");
                $("#mainviewpanel").removeClass("col-md-12");
                $("#mainviewpanel").removeClass("col-lg-12");
                $("#mainviewpanel").addClass("col-md-9");
                $("#mainviewpanel").addClass("col-lg-9");
                $("#viewpane2").hide();
                $("#right-column").show();
                
            },
            switchtotwopane: function () {
                $("#singleviewpane").removeClass("col-md-12");
                $("#singleviewpane").removeClass("col-lg-12");
                $("#singleviewpane").addClass("col-md-6");
                $("#singleviewpane").addClass("col-lg-6");
                $("#mainviewpanel").removeClass("col-md-9");
                $("#mainviewpanel").removeClass("col-lg-9");
                $("#mainviewpanel").addClass("col-md-12");
                $("#mainviewpanel").addClass("col-lg-12");
                
                $("#right-column").hide();
                this.displaychapterpanel2(this.book, this.chapter);
                $("#viewpane2").show();  
            },
            hidestatuspanel: function() {
                this.displaychapter(this.book, this.chapter);
                $("#singleviewpane .text-container").show();
                $("#singleviewpane .statuspanel").hide();
            },
            showstatuspanel: function() {
                
                if (this.planinstid === 1) return;
                $("#singleviewpane .statuspanel span.startdate").text(this.startdate);
                $("#singleviewpane .statuspanel .plangoal").text(this.plantitle);
                
                if ( ! $("#singleviewpane .statuspanel .msheet").length ) {
                    var total = 0, done = 0;
                    $("#singleviewpane .statuspanel .status").empty();
                    $.each(this.statustable, function(index, bkrows) {
                        /* statistable is a associate array, index is the key, which is string, not 1,2,3,4 */
                        var bname = biblebooklist[index][0];
                        var ul = $("<ul class='brow'></ul>");
                        $.each(bkrows, function(ind, val) {
                            total = total + 1;
                            var i = ind + 1;
                            var li = $("<li class='chbox' data-toggle='tooltip' data-title='Click to Mark; Double Click jump to Chapter'>" + i + "</li>");
                            if (val === 1) {
                                li.addClass("boxchecked");
                                done = done + 1;
                            }
                            li.click(function() {
                                var box = $(this);
                                bibleReader.togglestatusdonebox(box, index, i);

                            });
                            li.dblclick(function() {
                                bibleReader.switchchapter(index, i);
                                bibleReader.hidestatuspanel();
                            });
                            ul.append(li);

                        });
                        var div = $("<div style='margin: 5px 0px 0px 2px' class='row msheet'></div>");
                        div.append("<div style='padding-left: 5px; padding-right: 5px' class='col-md-2 booktitle'>" + bname + "</div>");
                        div.append($("<div class='col-md-10'></div>").append(ul));
                        $(".chbox").tooltip({delay: 1000});
                        $("#singleviewpane .statuspanel .status").append(div);
                    });
                    this.donechapter = done;
                    this.totalchapter = total;
                    var percentage = Math.round(this.donechapter * 100 / this.totalchapter);
                    $("#status-progress .complete").html(percentage + "% Completed (" + this.donechapter + "/" + this.totalchapter + ")");
                    $("#status-progress .progress-bar").attr("aria-valuenow", ' ' + percentage);
                    $("#status-progress .progress-bar").css("width", percentage + '%');   
                    
                };
                $("#singleviewpane .text-container").hide();
                $("#singleviewpane .statuspanel").show();
                
            },
            loadstatus: function() {
                var instidstr = this.planinstid.toString();
                $.getJSON("/api/plan/" + instidstr + "/all", {}, function (retobj) {
                    bibleReader.statustable = retobj.statustable;
                    bibleReader.startdate = retobj.statustable.startdate;
                });
            },
            decfontsize: function() {
                var fontSize = $("#singleviewpane .textbox").css('font-size').split('px')[0];
                var fontInt = parseInt(fontSize) - 1;
                if (fontInt > 10) {
                    var lineHeight = fontInt + 4;
                    fontSize = fontInt + 'px';
                    $("#singleviewpane .textbox, #viewpane2 .textbox").css('font-size', fontSize);
                    $("#singleviewpane .textbox, #viewpane2 .textbox").css('line-height', lineHeight + 'px');
                    $("#btn-fontsize").val(fontInt);    
                };
            },
            incfontsize: function() {
                var fontSize = $("#singleviewpane .textbox").css('font-size').split('px')[0];
                var fontInt = parseInt(fontSize) + 1;
                if (fontInt <= 40) {
                    var lineHeight = fontInt + 4;
                    fontSize = fontInt + 'px';
                    $("#singleviewpane .textbox, #viewpane2 .textbox").css('font-size', fontSize);
                    $("#singleviewpane .textbox, #viewpane2 .textbox").css('line-height', lineHeight + 'px');
                    $("#btn-fontsize").val(fontInt);      
                }
            },
            togglestatusdonebox: function(box, day, section) {  /* day-book, section-chapter 8*/
                var instidstr = this.planinstid.toString();   
                if (box.hasClass("boxchecked")) {
                    box.removeClass("boxchecked");
                    val = "0";
                } else {
                    val = "1";
                }
                box.addClass("loading");
                $.post("/api/plan/" + instidstr + "/" + day + "/" + section + "/", {status: val}, function(data) {
                    var retobj = $.parseJSON(data);
                    var daystr = day.toString();
                    box.removeClass("loading");
                    if (retobj.chpstatus === 1) {                 
                        box.addClass("boxchecked");
                        bibleReader.statustable[daystr][section-1] = 1;
                    } else {
                        
                        bibleReader.statustable[daystr][section-1] = 0;
                    }
                });
            },
            togglechapterdonebox: function(box, day, section) {  /* day-book, section-chapter */
             
                var instidstr = this.planinstid.toString();   
                if (box.hasClass("boxchecked")) {
                    box.removeClass("boxchecked");
                    val = "0";
                } else {
                    val = "1";
                }
                box.addClass("loading");
                $.post("/api/plan/" + instidstr + "/" + day + "/" + section, {status: val}, function(data) {
                    var retobj = $.parseJSON(data);
                    var daystr = day.toString();
                    box.removeClass("loading");
                    if (retobj.chpstatus === 1) {                 
                        box.addClass("boxchecked");
                        bibleReader.statustable[daystr][section-1] = 1;
                    } else {
                        bibleReader.statustable[daystr][section-1] = 0;
                    }
                    $("#singleviewpane .statuspanel .status").empty();
                });
            }
            
        };
        
        
        $(function() {      
            
            initLoginUser();
            
            
            $("#nav-version a").click(function(e) {
                var vname = $(this).parent().attr("bvname");
                bibleReader.changeversion(vname);
            });
    
            $("#nav-version2 a").click(function(e) {
                var vname = $(this).parent().attr("bvname");
                bibleReader.changeversion2(vname);
            });
            
            createBibleIndexMenu($("#bibleindex-dropdown div.smbox"));
            
            $("#bibleindex-dropdown ul li").attr("chapter", "1");
            
            
            
            $("#bibleindex-dropdown ul li").click(
                function(e) {
                    var bookid = parseInt($(this).attr("bookid"));
                    var bookname = biblebooklist[bookid][0];
                    var nchapter = biblebooklist[bookid][1];
                    
                    
                    if ($(this).find(".chaptermenu").length === 0) {
                        $("#bibleindex-dropdown ul.brow").empty();
                        var m = $("<ul></ul>");
                        m.addClass('chaptermenu');
                        for (var i=1;i<=nchapter;i++) {
                            var cli = $("<li>" + i + "</li>");
                            cli.click(function (e) {
                                var ch = parseInt($(this).text());
                                bibleReader.switchchapter(bookid, ch);
                                $("#bibleindex-dropdown div.biblemenuheader").hide();
                                
                                $("#singleviewpane .text-container").show();
                                $("#singleviewpane .statuspanel").hide();
                                $("#bibleindex-dropdown").dropdown('hide')
                                e.stopPropagation();
                            });
                            $("#bibleindex-dropdown ul.brow").append(cli);
                            $("#bibleindex-dropdown div.biblemenutitle").text(bookname);
                            $("#bibleindex-dropdown div.biblemenuheader").show();
                            
                        }
                        //$(this).append(m);
                    }

                    
                    e.stopPropagation();
                }
                /*function() {
                    $(this).find('a span.trig').remove();
                    $(this).find('ul.chaptermenu').remove();
                }*/
            );
    
            $("#btn-biblemenutitle").click(function(e) {
                $("#bibleindex-dropdown div.biblemenuheader").hide();
                e.stopPropagation();
            })
    
            $("#btn-nextchapter").click(function() {
                bibleReader.loadnextchapter();
            });

            $("#btn-prevchapter").click(function() {
                bibleReader.loadprevchapter();
            });

             $("#btn-nextbook").click(function() {
                bibleReader.loadnextbook();
            });

            $("#btn-prevbook").click(function() {
                bibleReader.loadprevbook();
            });

            $("#btn-twocolumn").click(function(e) {
                if ($(this).hasClass("active")) {
                    $(this).removeClass("active");
                } else {
                    $(this).addClass("active");
                }
                bibleReader.switchtotwopane();
            });

            $("#btn-closepanel2").click(function(e) {
                bibleReader.switchtoonepane();
            });
            
            $("#btn-incfont").click(function(e) {
                bibleReader.incfontsize();
                e.stopPropagation();
                return(false);
            });
            
             $("#btn-decfont").click(function(e) {
                bibleReader.decfontsize();
                e.stopPropagation();
                return(false);
            });

            $("#btn-status").click(function(e) {
                
                
                if ($("#singleviewpane .statuspanel").css("display") === "none") {
                    bibleReader.showstatuspanel();
                } else {
                    //$("#singleviewpane .textbox").show();
                    //$("#singleviewpane .statuspanel").hide();
                    bibleReader.hidestatuspanel();
                }
                e.stopPropagation();
            });

            $(".statuspanel .goaltd").hover(
                function() {
                    $(this).find("a").show();
                }, 
                function() {
                    $(this).find("a").hide();
                }
            );
        });
        
    </script>
        
</head>

<body class="bg-metallic-plate">
    <header>
        <div style="font-weight: 1" class="navbar navbar-fixed-top navbar-default">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                    </button>
                    <a style="padding: 13px 15px" class="navbar-brand" href="/">
                        <i class="fa fa-dot-circle-o"></i>
                        <span>Bible Circle</span>
                        <span style="font-size: 12px; font-family: '21st Century', fantasy">(beta)</span>
                    </a>
                </div>

                    <div class="collapse navbar-collapse">                          
                        <ul class="nav navbar-nav">
                            
          
                            <li class="hide">
                                <a id="bs-but" class="ktooltip" rel="tooltip" data-toggle="tooltip" title="Toggle BookShelf" href="#">
                                    
                                    <img style="position:relative; top: 50%; width: 22px;" alt="shelve" class="img-rounded brightness" src="/images/icon-bookshelf-24.png"/>
                                </a>
                            </li>
                            <li>
                                <a id="plan-but" href="#">
                                    <i class="glyphicon glyphicon-calendar"></i>
                                </a>
                            </li>
                            <li>
                                <a id="track-but" href="#">
                                    <i class="glyphicon glyphicon-bullhorn"></i>
                                </a>
                            </li>
                        </ul>                                           
                        <ul class="nav navbar-nav navbar-right">  
                            <li id="nav-app" class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    <i class="fa fa-th"></i>
                                </a>
                                <ul class="dropdown-menu">
                                    <li class=""><a href="http://kosolution.net/SongApp"><i class="fa fa-music"></i>&nbsp Song App</a></li>
                                    <li class=""><a href="http://kosolution.net/SongApp"><i class="fa fa-music"></i>&nbsp Song Mgmt</a></li>
                                    <li class="divider"></li>
                                    <li><a href="javascript:;">Help</a></li>
                                </ul>
                            </li>
                            <li id="nav-setting" class="dropdown hide">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    <i class="icon-cog"></i>
                                    Settings
                                    <b class="caret"></b>
                                </a>

                                <ul class="dropdown-menu">
                                        <li class="disabled"><a href="#"><i id="track" class="icon-check"></i>&nbsp Track Reading</a></li>
                                        <li><a href="javascript:;"><i class="icon-list-alt"></i>&nbsp Account Settings</a></li>
                                        <li class="hide"><a href="javascript:;"><i class="icon-lock"></i>&nbsp Privacy Settings</a></li>
                                        <li class="divider"></li>
                                        <li><a href="javascript:;">Help</a></li>
                                </ul>
                            </li>

                            <li id="nav-user" class="hide dropdown">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                            <i class="fa fa-user"></i> 
                                            <span class="user">User</span>
                                            <b class="caret"></b>
                                    </a>

                                    <ul class="dropdown-menu">
                                            <li><a href="profile.php"><i class="fa fa-suitcase"></i>&nbsp Profile</a></li>
                                            <li class="divider"></li>
                                            <li><a href="logout.php"><i class="fa fa-sign-out"></i>&nbsp Sign Out</a></li>
                                    </ul>
                            </li>
                            
                            <li id="nav-signup" class="hide"><a href="/signin.php?tab=signup" class="ktooltip" data-toggle="tooltip" title="Sign up to track Reading">Sign Up</a></li>
                            <li id="nav-login" class="hide"><a href="/signin.php" class="ktooltip" data-toggle="tooltip" title="Sign In">Sign In</a></li>
                        </ul> 
                    </div><!--/.navbar-collapse -->	
  
                </div>

            
            
            </div>
        </header>
    
    <div class="container">  
        <div style="padding-top: 7px" class="row">
            <div style="padding: 0px; border-color: #aaaaaa" id="mainviewpanel" class="col-xs-12 col-sm-12 col-md-9 col-lg-9 panel">
            <div style="font-size: 13px; line-height: 15px; float: left; padding: 0px;" id="singleviewpane" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div style="border-right: 1px solid #ddd;" class="panel panel-default panel-bible">
                        <div style="padding: 5px 10px;" class="panel-heading">
                            <div class="biblepanelheader">
                                <div class="btn-group">
                                    <button id ="btn-setfont" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="fa fa-font"></i></button>
                                    <ul class="dropdown-menu">
                                       
                                        <li style="padding: 10px">
                                            <div class="btn-group">
                                            <button id="btn-incfont" class="btn btn-primary"><i class="fa fa-plus"></i></button>
                                            
                                            <input id="btn-fontsize" style="width: 72px" class="btn btn-info" disabled type="button" value="14">
                                            
                                            <button id="btn-decfont" class="btn btn-primary"><i class="fa fa-minus"></i></button>
                                            </div>
                                        </li>
                                        
                                    </ul>
                                    <button id ="btn-status" class="btn btn-default"><i class="fa fa-list"></i></button>
                                    <a id ="btn-twocolumn" class="btn btn-default hidden-xs"><i class="fa fa-columns"></i></a>
                                </div>
                                <div class="btn-group">
                                    <button id="btn-prevbook" class="btn btn-default"><i class="fa fa-angle-double-left"></i></button>
                                    <button id="btn-prevchapter" class="btn btn-default"><i class="fa fa-angle-left"></i></button>
																		<a class="btn btn-default dropdown-toggle bookname visible-xs" data-toggle="dropdown"><i class="fa fa-book"></i></a>
																		<div id="bibleindex-dropdown" style="left: -100px; min-height: 400px; height:auto; width:320px" class="dropdown-menu" role="menu">
																		<div style="display: none" class="biblemenuheader">
																		    <div style="padding: 5px 15px" class="row">
																		       <div class="biblemenutitle col-md-8">Genesis</div>
																		       <div class="col-md-1 pull-right">
																		           <button id="btn-biblemenutitle" type="button" class="close">x</button>
																	         </div>
											                  </div>
																	      <ul style="height: auto; overflow-y: auto;"  class='brow'>
																	      </ul>
																		</div>
																		<div class="divider"></div>
																		<div class="smbox"></div>
																		</div>

                                    <button id="btn-nextchapter" class="btn btn-default"><i class="fa fa-angle-right"></i></button>
                                    <button id="btn-nextbook" class="btn btn-default"><i class="fa fa-angle-double-right"></i></button>

                                </div>
                                <div class="btn-group">
                                    <button id="btn-versiontext" style="width:80px" class="btn btn-default" data-toggle="dropdown">NET</button>
                                    <a class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="fa fa-caret-down"></i></a>             
                                    <ul id="nav-version" class="dropdown-menu">
                                        <li bvname="KJV"><a href="#">KJV - King James Version</a></li>
                                        <li bvname="ESV"><a href="#">ESV - English Standard Version</a></li>
                                        <li bvname="NET"><a href="#">NET - New English Version</a></li>
                                        <li bvname="CUV"><a href="#">和合本 - Chinese Union Version</a></li>
                                    </ul>

                                </div>
                                <div style="line-height:18px; font-size: 16px; padding-right:10px" class="btn-group hidden-xs bookname pull-right">
                                    <a class="btn dropdown-toggle" data-toggle="dropdown"><span></span>&nbsp<b class="caret"></b></a>
                                    <div id="bibleindex-dropdown" style="left: -360px; min-height: 400px; height:auto; width:540px" class="dropdown-menu" role="menu">
                                        <div style="display: none" class="biblemenuheader">
                                            <div style="padding: 5px 15px" class="row">
                                                <div class="biblemenutitle col-md-8">Genesis</div>
                                                <div class="col-md-1 pull-right">
                                                    <button id="btn-biblemenutitle" type="button" class="close">x</button>
                                                </div>
                                            </div>
                                            <ul style="height: auto; overflow-y: auto;"  class='brow'>
                                            </ul>
                                            
                                        </div>
                                        <div class="divider"></div>
                                        <div class="smbox"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel-body">
                            <div class="text-container">
                                <div style="font-size: 14px; line-height: 18px" class="textbox">
                                </div>
                                <div style="display:none" class="cboxrow">
                                    <span></span>  &nbsp &nbsp Chapter Done
                                </div>
                            </div>
                            <div style="display:none" class="statuspanel">
														    <div class="row">
                                    <div style="padding-right: 12px" class="summary-row col-md-9 col-xs-12">
                                        <table style="font-size: 90%;" class="table table-striped">
                                            <tr><th width="140px">Goal</th><td class="goaltd"><div class="plangoal pull-left">New Testament</div>
                                                    <div class="pull-right"><a style="display:none"><span class="glyphicon glyphicon-edit"></span></a></div></td></tr>
                                            <tr><th>Start Date</th><td><span class="startdate">2014-01-01</span></td></tr>
                                            <tr><th>Status: </th>
                                                <td>
                                                  <div id="status-progress" >
                                                    <div class="complete"></div>   
                                                    <div class="progress">
                                                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                                                         <span class="sr-only">40%</span>
                                                    </div>
                                                    </div>
                                                  </div>
                                                </td>
                                            </tr>
                                        </table>
                                        
                                    </div>
																	  <div class="col-md-3 alignleft hidden-xs">
																	  <script type="text/javascript">
																		    amzn_assoc_ad_type = "banner";
																				amzn_assoc_marketplace = "amazon";
																				amzn_assoc_region = "US";
																				amzn_assoc_placement = "assoc_banner_placement_default";
																				amzn_assoc_campaigns = "amazonhomepage";
																				amzn_assoc_banner_type = "rotating";
																				amzn_assoc_p = "20";
																				amzn_assoc_width = "120";
																				amzn_assoc_height = "90";
																				amzn_assoc_tracking_id = "bcircle00-20";
																				amzn_assoc_linkid = "c2c7eefcd726e1bce6d4d3c45263c274";
																		</script>
																		<script src="//z-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&Operation=GetScript&ID=OneJS&WS=1"></script>

																		</div>
															 </div>
                                    <div class="status">
                                        
                                    </div>
                            </div>
                        </div>                            
                    </div>
            </div>
            <div style="display:none; font-size: 13px; line-height: 15px; float: left; padding: 0px" id="viewpane2" class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                <div style="border-left: 1px solid #ddd;" class="panel panel-default panel-bible">
                    <div style="padding: 5px 10px;" class="panel-heading">
                        <div class="biblepanelheader">
                            <div class="btn-group">
                                <button id="btn-bookmark" class="btn btn-default"><i class="fa fa-file-text-o"></i></button>
                                <button id="btn-library" class="btn btn-default"><i class="fa fa-book"></i></button>
                                <button id="btn-bcircle" class="btn btn-default"><i class="fa fa-circle-o-notch"></i></button>
                                

                            </div>
                            <div class="btn-group">
                                <button id="btn-versiontext2" style="width:80px" class="btn btn-default" data-toggle="dropdown">CUV</button>
                                <a class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="fa fa-caret-down"></i></a>             
                                <ul id="nav-version2" class="dropdown-menu">
                                    <li bvname="KJV"><a href="#">KJV - King James Version</a></li>
                                    <li bvname="ESV"><a href="#">ESV - English Standard Version</a></li>
                                    <li bvname="NET"><a href="#">NET - New English Version</a></li>
                                    <li bvname="CUV"><a href="#">和合本 - Chinese Union Version</a></li>
                                </ul>
                            </div>
                             <button id="btn-closepanel2" class="btn btn-default pull-right"><i class="fa fa-times"></i></button>
                        </div>    
                    </div>
                    <div class="panel-body">
                      
                        <div class="text-container">
                            <div style="font-size: 14px; line-height: 18px" class="textbox"></div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            <div id="right-column" class="col-sm-6 col-md-3 col-lg-3">
						    <div class="alignleft">
                <script charset="utf-8" type="text/javascript">
								amzn_assoc_ad_type = "banner";
								amzn_assoc_marketplace = "amazon";
								amzn_assoc_region = "US";
								amzn_assoc_placement = "assoc_banner_placement_default";
								amzn_assoc_campaigns = "amazonhomepage";
								amzn_assoc_banner_type = "rotating";
								amzn_assoc_p = "14";
								amzn_assoc_width = "160";
								amzn_assoc_height = "600";
								amzn_assoc_tracking_id = "bcircle00-20";
								amzn_assoc_linkid = "056660211f823cc2e588b40073fa8dc6";
								</script>
								<script src="//z-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&Operation=GetScript&ID=OneJS&WS=1"></script>


                </div>    
                <div class="panel">
                    <div style="display: none;" class="panel-heading">
                        <a href="#" style="font-size: 75%" class="pull-right">View all <b class="caret"></b></a>
                        <h5>
                            <i class="fa fa-circle-o"></i>
                            <span>Your Bible Circles</span>
                        </h5>
                    </div>
                    <div style="display: none; height: 300px;" class="panel-body">

                    </div>  
                    <div class="panel-heading panel-heading-sm">
                        <div style="padding: 2px 4px;" class="panel-title">
                            <i class="fa fa-circle-o"></i>
                            <span>Your Notes</span>
                        </div>
                    </div>
                    <div style="height: 200px;" class="panel-body">

                    </div>  
                </div>
            </div>
        </div>
    </div>
    
    <div id="loading-overlay" style="text-align: center" class="overlay">    
            <div style="display:inline-block; margin: 220px auto">
                <div style="display: none; margin-bottom: 31px; background-color: #eee; padding: 10px 60px; border-radius: 5px;  font-size: 16px; color: black;">Signing  in</div>
                <img src="images/loading-b1.gif" height="50">
                <br/>
                
            </div>
    </div>
    
    <!-- Place this asynchronous JavaScript just before your </body> tag -->
    <script type="text/javascript">
      (function() {
       var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
       po.src = 'https://apis.google.com/js/client:plusone.js';
       var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
     })();
    </script>    
</body>
</html>

